## 后端接口设计文档


* 用户系统
  * 注册（扩展知面）
    * 邮箱密码
    * 手机 验证码 （验证码获取）
    * Oauth2 (Gitee, Github, 微信等等)
  * 登录
    * 邮箱密码 POST /user/loginByEmail
  * 获取用户信息
  * 修改用户信息
* 作品管理
  * 创建空白作品 => POST /works
  * 复制作品（通过模板创建）
  * 查询自己的作品列表 *GET /works?title=***&pageIndex=0&pageSize=10*
  * 查询单个作品信息
  * 保存（更新）作品
  * 删除作品
  * 发布作品
  * 发布为模版
* 模板-作品的另外一种表现表形式，公开的作品
  * 首面模版列表
  * 单个模版信息
* 渠道-依附于作品的特殊信息
  * 创建渠道
  * 删除渠道
  * 修改渠道名称
  * 获了单个作品的所有渠道
* 工具类
  * 上传照片（扩展知识面，本地上传，云服务上传以及图片处理）
  * 预览以及展示传和品（不是标准的RESTful接口）
* **要特别留意的问题：权限**
  > 权限简单来说就是一个用户看到那些数据，能操作那些功能
  >
* 第一层级：登录用户
* 第二层级：只能更新或者删除自己的资源
* 第三层级：只能更新特定的字段
* 第四层级：管理员

### 直接从需求提取接口

#### **RESTful API 格式**

* 路径-Endpoint /works

  > 第个网址代表一种资源(resource), 正好可以和我们的需求分类的这几种实体相对应。
  >
* 动词- Verb

  > 对于资源的具体操作类型，由HTTP动词表示。
  >

  * GET （SELECT）: 从服务器取出资源（一项或多项）
  * POST （CREATE）: 在服务器新建一个资源。
  * PUT（UPDATE）：在服务器更新资源（客户端提供改变后的完整资源）
  * PATH（UPDATE）：在服务器更新资源（客户端提供改变的属性）
  * DELETE（DELETE）：从服务器删除资源。
* 过滤信息

  > 如果记录数量很多，服务器不可能都将它们返回给用户。API应该提供参数，过滤返回结果
  >

```
?limit=10; // 指定返回记录的数量
?offset = 10; //指定返回记录的开始位置


```

* 请求参数


* 返回格式
  **HTTP返回状态码**
  ```
  {
  	errno: 0,       // 错误码，无错误则返回 0
  	data: {...},    // 或 [...]
  	message: 'xxx'
  }
  ```
